var xhr=new XMLHttpRequest;function activeItem(t){document.querySelectorAll(".dessert")[t].classList.add("active"),cartList.push(allData[t]),addCartList(),getTotalOrder()}function addCartList(){let a=document.querySelector(".cart-list .items");cartSectionInfo.innerHTML=endCartSection(),a.innerHTML="",cartList.map((t,e)=>a.innerHTML+=`
    <div class="item" >
      <div>
        <div class="name">${t.name}</div>
        <div class="property"> 
          <p class="count">${t.count}x</p>
          <p class="price">@ $${fixed(t.price)}</p>
          <p class="total">$ ${totalItemPrice(t.price,t.count)}</p>
          </div>
      </div>
    <button class="close" onclick='removeCartList(${t.id})'><img src='./assets/images/close.svg'/></button>
    </div>`),putInLocalStorage()}xhr.open("GET","./data.json",!0),xhr.onreadystatechange=function(){"200"==this.status&&4==this.readyState&&addDeserts(JSON.parse(this.responseText))},xhr.send();var dessertsContent=document.querySelector(".desserts .content"),cartSectionInfo=document.querySelector(".cart-list .content"),modal=document.querySelector(".modal"),overlay=document.querySelector(".overlay"),hideModalBtn=document.querySelector("button.hide-modal"),orderList=document.querySelector(".modal .order-list .orders");let allData=[],cartList=[];function addDeserts(t){allData=t.map(t=>({...t,count:1}));t=checkLocalStorage();dessertsContent.innerHTML="",allData.map(t=>{dessertsContent.innerHTML+=`<div class="dessert">
      <div class='image'>
        <img loading='lazy' src="${t.image.desktop}" />
      </div>
      <div class="addCart" >
        <div class="wrapper">
          <div class="cart" onclick='activeItem(${t.id})'>
            <img src="./assets/images/cart.svg"/>
            <p>Add to Cart</p>
          </div>
          <div class="count">
            <button class='increase' onclick='increaseCount(${t.id})'><img src='./assets/images/increase.svg'/></button>
            <p class='countElement'>${t.count}</p>
            <button class='decrease' onclick='decreaseCount(${t.id})'><img src='./assets/images/decrease.svg'/></button>
          </div>
        </div>
      </div>
      <div class="text">
        <span class="cat">${t.category}</span>
        <h3 class="name">${t.name}</h3>
        <p class="price">$${fixed(t.price)}</p>
      </div>
    </div>`}),t&&(t.map(t=>activeItem(t.id)),cartList=t)}function endCartSection(){return` 
  <div class="total-order">
    <p>order total<span>0.0</span></p>
  </div>
  <div class="carbon">
    <img src="./assets/images/tree.svg" />
    <p>This is a <span>carbon-neutral </span>delivery</p>
  </div>
  <button class="submit" onclick='confirmOrder()'>Confirm Order</button>`}function emptyCartSection(){return`<div class='content-1'><img src="./assets/images/cake.svg"><p>Your added items will appear here</p></div>`}function checkLocalStorage(){if(localStorage.cartList){var t=JSON.parse(localStorage.getItem("cartList"));if(1<=t.length)return t.map(t=>allData[t.id].count=t.count),t}else localStorage.setItem("cartList","[]")}function confirmOrder(){showModal(),orderList.innerHTML="",orderList.innerHTML+=cartList.map(t=>`
  <div class="order">
    <div class="image">
      <img src='${t.image.thumbnail}' />
      </div>
      <div class="info">
        <p class="name">${t.name}</p>
        <p><span>${t.count}X</span><span>@ $${fixed(t.price)}</span></p>
      </div>
      <div class="total-price">$ ${totalItemPrice(t.price,t.count)}</div>
      </div>`),orderList.innerHTML+=`
    <div class='total-order'>
      <p>Order Total
        <span class='total'>${fixed(getTotalPrice().price)}$</span>
      </p>
    </div>
  `}function decreaseCount(e){var t=document.querySelectorAll(".countElement")[e],a=parseInt(t.textContent),r=cartList.findIndex(t=>t.id===e);1==a?(inactiveItem(e),removeCartList(r)):(t.innerHTML=a-1,cartList[r].count=cartList[r].count-1,addCartList(),getTotalOrder())}function getTotalOrder(){var t=document.querySelector(".cart-list h2 span"),e=document.querySelector(".cart-list .content .total-order span");t.innerHTML=`(${getTotalPrice().count})`,e.innerHTML=fixed(getTotalPrice().price)+"$"}function hideModal(){removeAllCartList(),overlay.classList.remove("active"),modal.classList.remove("active"),orderList.innerHTML=""}function inactiveItem(t){var e=document.querySelectorAll(".dessert")[t],t=document.querySelectorAll(".countElement")[t];t&&(t.innerHTML=1),e&&e.classList.remove("active")}function increaseCount(e){var t=document.querySelectorAll(".countElement")[e],a=parseInt(t.textContent),r=cartList.findIndex(t=>t.id===e);t.innerHTML=a+1,cartList[r].count=cartList[r].count+1,addCartList(),getTotalOrder()}function putInLocalStorage(){localStorage.setItem("cartList",JSON.stringify(cartList))}function removeAllCartList(){for(;0<cartList.length&&(removeCartList(cartList[0].id),0!==cartList.length););}function removeCartList(e){var t=cartList.findIndex(t=>t.id==e);cartList.splice(t,1),addCartList(),inactiveItem(e),getTotalOrder(),0==cartList.length&&(cartSectionInfo.innerHTML=emptyCartSection())}function showModal(){overlay.classList.add("active"),modal.classList.add("active")}function getTotalPrice(){return{count:cartList.map(t=>t.count).reduce((t,e)=>t+e,0),price:cartList.map(t=>t.count*t.price).reduce((t,e)=>t+e,0)}}function totalItemPrice(t,e){return fixed(parseInt(t*e))}function fixed(t){return t.toFixed(2)}hideModalBtn.addEventListener("click",hideModal);